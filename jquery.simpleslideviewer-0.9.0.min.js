/* simple slide viewer plugin v0.9.0 https://github.com/infograve/jquery.simpleslideviewer
    by Ko1.Imamura 2014 Released under the MIT license
*/
(function(e){e.fn.ssViewer=function(t){var n=this;var r={distance:.2,onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){}};var i=e.extend(r,t);var s={width:e(n).innerWidth(),height:e(n).innerHeight()};var o={width:e(n).children().eq(0).innerWidth(),height:e(n).children().eq(0).innerHeight()};var u={x:Math.floor(o.width/s.width),y:Math.floor(o.height/s.height)};var a=e(n).position();var f={x:Math.floor(a.left),y:Math.floor(a.top)};var l=false;var c={x:0,y:0};var h={x:0,y:0};var p={x:0,y:0};var d=function(e){l=true;if(e.originalEvent.touches==null)h={x:Math.floor(e.pageX-f.x),y:Math.floor(e.pageY-f.y)};else h={x:Math.floor(e.originalEvent.touches[0].pageX-f.x),y:Math.floor(e.originalEvent.touches[0].pageY-f.y)};i.onSwipeStart({currentPageX:c.x,currentPageY:c.y,startX:h.x,startY:h.y,event:e});e.preventDefault()};var v=function(t){if(l){var r;if(t.originalEvent.touches==null)r={x:Math.floor(t.pageX-f.x),y:Math.floor(t.pageY-f.y)};else r={x:Math.floor(t.originalEvent.touches[0].pageX-f.x),y:Math.floor(t.originalEvent.touches[0].pageY-f.y)};p={x:h.x-r.x,y:h.y-r.y};e(n).scrollLeft(s.width*c.x+p.x);e(n).scrollTop(s.height*c.y+p.y);i.onSwipeMove({currentPageX:c.x,currentPageY:c.y,startX:h.x,startY:h.y,deltaX:p.x,deltaY:p.y,event:t})}t.preventDefault()};var m=function(e){if(l){var t=c.x;t+=p.x>s.width*i.distance?1:0;t-=p.x<-(s.width*i.distance)?1:0;var n=c.y;n+=p.y>s.height*i.distance?1:0;n-=p.y<-(s.height*i.distance)?1:0;var r=E(t,n);var o=h;var u=p;h={x:0,y:0};p={x:0,y:0};l=false;i.onSwipeEnd({currentPageX:c.x,currentPageY:c.y,startX:o.x,startY:o.y,deltaX:u.x,deltaY:u.y,swiped:r,event:e})}e.preventDefault()};var g=function(){E(c.x+1,c.y)};var y=function(){E(c.x-1,c.y)};var b=function(){E(c.x,c.y-1)};var w=function(){E(c.x,c.y+1)};var E=function(t,r){var i=t==null?c.x:t;i=i<0?0:i;i=i<u.x?i:u.x-1;var o=r==null?c.y:r;o=o<0?0:o;o=o<u.y?o:u.y-1;var a=i!=c.x||o!=c.y?true:false;c={x:i,y:o};e(n).animate({scrollTop:s.height*o,scrollLeft:s.width*i},200);return a};var S=function(){return u};var x=function(){return c};e(n).on("mousedown",d);e(n).on("touchstart",d);e(n).on("mousemove",v);e(n).on("touchmove",d);e(n).on("mouseup",m);e(n).on("touchend",m);e(n).on("mouseout",m);return{forward:g,rewind:y,rise:b,drop:w,slideTo:E,getCurrentPage:x,getContentPage:S}}})(jQuery)